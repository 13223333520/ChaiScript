language: cpp
compiler:
  - gcc
before_install:
  - sudo apt-get install libboost-dev libboost-all-dev
  - sudo pip install cpp-coveralls
script:
  - cmake -D ENABLE_COVERAGE:BOOL=TRUE -D CMAKE_BUILD_TYPE:STRING=Debug .
  - make -j2
  - make test
  - mkdir gcov
  - find CMakeFiles/ -name "*.gc*" -exec mv {} gcov/ \;
  - gcov -d -o gcov gcov/*.gcda
  - coveralls -n -E ".*\.cpp"
after_script:
  - contrib/codeanalysis/runcppcheck.sh
notifications:
  email:
    recipients:
      - jason@emptycrate.com
    on_success: always
    on_failure: always
env:
  global:
    secure: LCUAKUCRtFp2ak81nVLR+jx0C9+Drwx1OR4VzuvH+HNGWFdUZmAIV3R84euDqFC5cUhYYipaeMbiSOJUHE4MNlL58eQZryED6KSL7k7SgxOLpFSspMvuMjIYZLlBWpBneCR/EMDilu+zXEnASfVUMPuLmtY1GAyfSoZboqFProc=
