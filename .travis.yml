language: cpp
compiler:
  - gcc
  - clang
before_install:
  - sudo apt-get install libboost-dev libboost-all-dev
  - sudo pip install cpp-coveralls
script: 
  - cmake -D ENABLE_COVERAGE:BOOL=TRUE -D CMAKE_BUILD_TYPE:STRING=Debug .
  - make -j2
  - make test
  - mkdir gcov
  - find CMakeFiles/ -name "*.gc*" -exec mv {} gcov/ \;
  - $GCOV -d -o gcov gcov/*.gcda
  - coveralls -n -E ".*\.cpp"
notifications:
  recipients:
    - jason@emptycrate.com
  email:
    on_success: always
    on_failure: always

